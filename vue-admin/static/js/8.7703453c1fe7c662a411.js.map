{"version":3,"sources":["webpack:///static/js/8.7703453c1fe7c662a411.js","webpack:///./src/pages/user_manage/admin/role.vue?fb1e","webpack:///./src/api/role.js","webpack:///./src/pages/user_manage/admin/role.vue","webpack:///src/pages/user_manage/admin/role.vue","webpack:///./src/pages/user_manage/admin/role.vue?a846","webpack:///./src/pages/user_manage/admin/role.vue?408b"],"names":["webpackJsonp","2an4","module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourceRoot","WQQx","__webpack_exports__","getRoleList","query","Object","fetch","url","API_SUFFIX","method","params","roleAuthList","roleAuth","data","roleSave","formName","arguments","length","undefined","roleDelete","_toConsumableArray","arr","Array","isArray","arr2","from","injectStyle","ssrContext","defineProperty","value","formJson","id","name","status","remark","listorder","role","list","loading","authList","defaultProps","children","label","authLoading","authFormVisible","authFormData","role_id","auth_rules","index","formMap","add","edit","formLoading","formVisible","formData","formRules","required","message","trigger","deleteLoading","methods","onSubmit","this","getList","_this","then","response","catch","handleAuth","roleId","_this2","auth_list","checkedKeys","checked_keys","tempCheckedKeys","node","getTreeNode","tempNode","$refs","tree","setCheckedKeys","authSubmit","_this3","getCheckedKeys","key","getNode","concat","getNodeParents","parent","setArr","Set","$alert","confirmButtonText","res","errcode","$message","errmsg","type","editLoading","handleForm","row","assign","clearValidate","formSubmit","_this4","validate","valid","resetFields","unshift","splice","handleDel","_this5","$confirm","filters","statusFilterType","0","1","statusFilterName","mounted","created","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","inline","model","size","placeholder","callback","$$v","$set","expression","_v","icon","on","click","nativeOn","$event","directives","rawName","staticStyle","width","max-height","prop","scopedSlots","_u","fn","scope","_f","_s","show-overflow-tooltip","fixed","margin-left","$index","title","visible","close-on-click-modal","update:visible","ref","overflow-y","show-checkbox","default-expand-all","node-key","props","slot","rules","auto-complete","staticRenderFns","esExports","admin_role","normalizeComponent","__vue_styles__","Component","e1/n","content","locals"],"mappings":"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","file":"static/js/8.7703453c1fe7c662a411.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ \"2an4\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"UTlt\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"role.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"WQQx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/utils/fetch.js + 1 modules\nvar fetch = __webpack_require__(\"Vo7i\");\n\n// CONCATENATED MODULE: ./src/api/role.js\n/**\n * Created by lk on 17/6/4.\n */\n\n\nvar API_SUFFIX = \".json\";\n\n// 获取列表\nfunction getRoleList(query) {\n    return Object(fetch[\"a\" /* default */])({\n        url: '/admin/role/index' + API_SUFFIX,\n        method: 'get',\n        params: query\n    });\n}\n\n// 编辑\nfunction roleAuthList(query) {\n    return Object(fetch[\"a\" /* default */])({\n        url: '/admin/role/auth' + API_SUFFIX,\n        method: 'get',\n        params: query\n    });\n}\n\n// 添加\nfunction roleAuth(data) {\n    return Object(fetch[\"a\" /* default */])({\n        url: '/admin/role/auth' + API_SUFFIX,\n        method: 'post',\n        data: data\n    });\n}\n\n// 保存\nfunction roleSave(data, formName) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'post';\n\n    var url = formName === 'add' ? '/admin/role/save' + API_SUFFIX : '/admin/role/edit' + API_SUFFIX;\n    return Object(fetch[\"a\" /* default */])({\n        url: url,\n        method: method,\n        data: data\n    });\n}\n\n// 删除\nfunction roleDelete(data) {\n    return Object(fetch[\"a\" /* default */])({\n        url: '/admin/role/delete' + API_SUFFIX,\n        method: 'post',\n        data: data\n    });\n}\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=script&index=0!./src/pages/user_manage/admin/role.vue\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nvar formJson = {\n    id: '',\n    name: '',\n    status: '1',\n    remark: '',\n    listorder: 999\n};\n/* harmony default export */ var role = ({\n    data: function data() {\n        return {\n            query: {\n                name: '',\n                status: ''\n            },\n            list: [],\n            loading: true,\n            authList: [],\n            defaultProps: {\n                children: 'children',\n                label: 'title'\n            },\n            authLoading: false,\n            authFormVisible: false,\n            authFormData: {\n                role_id: '',\n                auth_rules: []\n            },\n\n            index: null,\n            formName: null,\n            formMap: {\n                add: '新增',\n                edit: '编辑'\n            },\n            formLoading: false,\n            formVisible: false,\n            formData: formJson,\n            formRules: {\n                name: [{ required: true, message: '请输入名称', trigger: 'blur' }],\n                status: [{ required: true, message: '请选择状态', trigger: 'change' }]\n            },\n            deleteLoading: false\n        };\n    },\n\n    methods: {\n        onSubmit: function onSubmit() {\n            this.getList();\n        },\n        getList: function getList() {\n            var _this = this;\n\n            this.loading = true;\n            getRoleList(this.query).then(function (response) {\n                _this.loading = false;\n                _this.list = response || [];\n            }).catch(function () {\n                _this.loading = false;\n                _this.list = [];\n            });\n        },\n\n        // 显示授权界面\n        handleAuth: function handleAuth(roleId) {\n            var _this2 = this;\n\n            this.authFormVisible = true;\n            this.authFormData.role_id = roleId;\n            this.authFormData.auth_rules = [];\n            this.authList = [];\n            roleAuthList({ id: roleId }).then(function (response) {\n                _this2.authList = response.auth_list || [];\n                var checkedKeys = response.checked_keys || [];\n                var tempCheckedKeys = [];\n                var id = null;\n                var node = null;\n                var getTreeNode = function getTreeNode(arr, id) {\n                    for (var i in arr) {\n                        var tempNode = arr[i];\n                        if (tempNode.id === id) {\n                            // 找到了，就不找了\n                            node = tempNode;\n                        }\n                        // 如果还有子节点，再继续找\n                        getTreeNode(tempNode.children, id);\n                    }\n                };\n                for (var i in checkedKeys) {\n                    id = checkedKeys[i];\n                    getTreeNode(_this2.authList, id);\n                    if (node && node.children.length <= 0) {\n                        // 如果下面没有子节点，则加入\n                        tempCheckedKeys.push(id);\n                    }\n                }\n                _this2.$refs.tree.setCheckedKeys(tempCheckedKeys);\n            }).catch(function () {});\n        },\n        authSubmit: function authSubmit() {\n            var _this3 = this;\n\n            this.authLoading = true;\n            var getNodeParents = function getNodeParents(node) {\n                var arr = [];\n                var id = node.data.id || null;\n                if (id) {\n                    arr.push(node.data.id);\n                }\n                if (node.parent) {\n                    arr = arr.concat(getNodeParents(node.parent));\n                }\n                return arr;\n            };\n            var checkedKeys = this.$refs.tree.getCheckedKeys();\n            var arr = [];\n            for (var key in checkedKeys) {\n                var node = this.$refs.tree.getNode(checkedKeys[key]);\n                arr = arr.concat(getNodeParents(node));\n            }\n            var setArr = new Set(arr);\n            this.authFormData.auth_rules = [].concat(_toConsumableArray(setArr));\n            if (!this.authFormData) {\n                this.$alert('请至少选择一个权限', '提示', {\n                    confirmButtonText: '确定'\n                });\n                return false;\n            }\n            roleAuth(this.authFormData).then(function (res) {\n                _this3.authLoading = false;\n                if (res.errcode) {\n                    _this3.$message({\n                        message: res.errmsg,\n                        type: 'error'\n                    });\n                } else {\n                    _this3.$message({\n                        message: '授权成功',\n                        type: 'success'\n                    });\n                    // 刷新表单\n                    _this3.authFormVisible = false;\n                }\n            }).catch(function () {\n                _this3.editLoading = false;\n            });\n        },\n\n        // 显示新增界面\n        handleForm: function handleForm(index, row) {\n            this.formVisible = true;\n            this.formData = Object.assign({}, formJson);\n            if (row !== null) {\n                this.formData = Object.assign({}, row);\n            }\n            this.formData.status += ''; // 转为字符串（解决默认选中的时候字符串和数字不能比较的问题）\n            this.formName = 'add';\n            if (index !== null) {\n                this.index = index;\n                this.formName = 'edit';\n            }\n            // 清空验证信息表单\n            if (this.$refs['dataForm']) {\n                this.$refs['dataForm'].clearValidate();\n            }\n        },\n        formSubmit: function formSubmit() {\n            var _this4 = this;\n\n            this.$refs['dataForm'].validate(function (valid) {\n                if (valid) {\n                    _this4.formLoading = true;\n                    var data = Object.assign({}, _this4.formData);\n                    roleSave(data, _this4.formName).then(function (res) {\n                        _this4.formLoading = false;\n                        if (res.errcode) {\n                            _this4.$message({\n                                message: res.errmsg,\n                                type: 'error'\n                            });\n                        } else {\n                            _this4.$message({\n                                message: '操作成功',\n                                type: 'success'\n                            });\n                            // 刷新表单\n                            _this4.$refs['dataForm'].resetFields();\n                            _this4.formVisible = false;\n                            if (_this4.formName === 'add') {\n                                // 向头部添加数据\n                                _this4.list.unshift(res);\n                            } else {\n                                _this4.list.splice(_this4.index, 1, data);\n                            }\n                        }\n                    }).catch(function () {\n                        _this4.formLoading = false;\n                    });\n                }\n            });\n        },\n\n        // 删除\n        handleDel: function handleDel(index, row) {\n            var _this5 = this;\n\n            if (row.id) {\n                this.$confirm('确认删除该记录吗?', '提示', {\n                    type: 'warning'\n                }).then(function () {\n                    _this5.deleteLoading = true;\n                    var para = { id: row.id };\n                    roleDelete(para).then(function (res) {\n                        _this5.deleteLoading = false;\n                        if (res.errcode) {\n                            _this5.$message({\n                                message: res.errmsg,\n                                type: 'error'\n                            });\n                        } else {\n                            _this5.$message({\n                                message: '删除成功',\n                                type: 'success'\n                            });\n                            // 刷新数据\n                            _this5.list.splice(index, 1);\n                        }\n                    }).catch(function () {\n                        _this5.deleteLoading = false;\n                    });\n                }).catch(function () {\n                    _this5.$message({\n                        type: 'info',\n                        message: '取消删除'\n                    });\n                });\n            }\n        }\n    },\n    filters: {\n        statusFilterType: function statusFilterType(status) {\n            var statusMap = {\n                0: 'gray',\n                1: 'success'\n            };\n            return statusMap[status];\n        },\n        statusFilterName: function statusFilterName(status) {\n            var statusMap = {\n                0: '禁用',\n                1: '正常'\n            };\n            return statusMap[status];\n        }\n    },\n    mounted: function mounted() {},\n    created: function created() {\n        // 加载表格数据\n        this.getList();\n    }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-1457f30f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/user_manage/admin/role.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{staticClass:\"query-form\",attrs:{\"inline\":true,\"model\":_vm.query,\"size\":\"mini\"}},[_c('el-form-item',{staticClass:\"query-form-item\"},[_c('el-input',{attrs:{\"placeholder\":\"角色名称\"},model:{value:(_vm.query.name),callback:function ($$v) {_vm.$set(_vm.query, \"name\", $$v)},expression:\"query.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"query-form-item\"},[_c('el-select',{attrs:{\"placeholder\":\"状态\"},model:{value:(_vm.query.status),callback:function ($$v) {_vm.$set(_vm.query, \"status\", $$v)},expression:\"query.status\"}},[_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"正常\",\"value\":\"1\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.getList}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.handleForm(null, null)}}},[_vm._v(\"新增\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"max-height\":\"500\"}},[_c('el-table-column',{attrs:{\"label\":\"角色 ID\",\"prop\":\"id\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm._f(\"statusFilterType\")(scope.row.status)}},[_vm._v(_vm._s(_vm._f(\"statusFilterName\")(scope.row.status)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"描述\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.remark))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.handleAuth(scope.row.id)}}},[_vm._v(\"授权\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.handleForm(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"type\":\"danger\",\"size\":\"small\",\"loading\":_vm.deleteLoading},nativeOn:{\"click\":function($event){_vm.handleDel(scope.$index, scope.row)}}},[_vm._v(\"删除\\n                \")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":\"授权\",\"visible\":_vm.authFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.authFormVisible=$event}}},[_c('el-tree',{ref:\"tree\",staticStyle:{\"max-height\":\"75vh\",\"overflow-y\":\"auto\"},attrs:{\"data\":_vm.authList,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"props\":_vm.defaultProps}}),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.authFormVisible = !_vm.authFormVisible}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.authLoading},nativeOn:{\"click\":function($event){_vm.authSubmit()}}},[_vm._v(\"提交\\n            \")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.formMap[_vm.formName],\"visible\":_vm.formVisible},on:{\"update:visible\":function($event){_vm.formVisible=$event}}},[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.formData,\"rules\":_vm.formRules}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.formData.name),callback:function ($$v) {_vm.$set(_vm.formData, \"name\", $$v)},expression:\"formData.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"listorder\"}},[_c('el-input',{attrs:{\"type\":\"\",\"auto-complete\":\"off\"},model:{value:(_vm.formData.listorder),callback:function ($$v) {_vm.$set(_vm.formData, \"listorder\", $$v)},expression:\"formData.listorder\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"status\"}},[_c('el-radio-group',{model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},[_c('el-radio',{attrs:{\"label\":\"0\"}},[_vm._v(\"禁用\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"正常\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.formData.remark),callback:function ($$v) {_vm.$set(_vm.formData, \"remark\", $$v)},expression:\"formData.remark\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.formVisible = !_vm.formVisible}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.formLoading},nativeOn:{\"click\":function($event){_vm.formSubmit()}}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var admin_role = (esExports);\n// CONCATENATED MODULE: ./src/pages/user_manage/admin/role.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"e1/n\")\n}\nvar normalizeComponent = __webpack_require__(\"Z0/y\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  role,\n  admin_role,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var user_manage_admin_role = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"e1/n\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"2an4\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"FIqI\")(\"21f842cc\", content, true, {});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/8.7703453c1fe7c662a411.js","exports = module.exports = require(\"../../../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"role.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.11@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1457f30f\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/user_manage/admin/role.vue\n// module id = 2an4\n// module chunks = 8","/**\n * Created by lk on 17/6/4.\n */\nimport fetch from '../utils/fetch'\n\nconst API_SUFFIX = process.env.API_SUFFIX\n\n// 获取列表\nexport function getRoleList (query) {\n    return fetch({\n        url: '/admin/role/index' + API_SUFFIX,\n        method: 'get',\n        params: query\n    })\n}\n\n// 编辑\nexport function roleAuthList (query) {\n    return fetch({\n        url: '/admin/role/auth' + API_SUFFIX,\n        method: 'get',\n        params: query\n    })\n}\n\n// 添加\nexport function roleAuth (data) {\n    return fetch({\n        url: '/admin/role/auth' + API_SUFFIX,\n        method: 'post',\n        data: data\n    })\n}\n\n// 保存\nexport function roleSave (data, formName, method = 'post') {\n    var url = formName === 'add' ? '/admin/role/save' + API_SUFFIX : '/admin/role/edit' + API_SUFFIX\n    return fetch({\n        url: url,\n        method: method,\n        data: data\n    })\n}\n\n// 删除\nexport function roleDelete (data) {\n    return fetch({\n        url: '/admin/role/delete' + API_SUFFIX,\n        method: 'post',\n        data: data\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/role.js","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1457f30f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./role.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./role.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1457f30f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./role.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user_manage/admin/role.vue\n// module id = null\n// module chunks = ","<template>\n\n    <div>\n        <el-form :inline=\"true\" :model=\"query\" class=\"query-form\" size=\"mini\">\n            <el-form-item class=\"query-form-item\">\n                <el-input v-model=\"query.name\" placeholder=\"角色名称\"></el-input>\n            </el-form-item>\n            <el-form-item class=\"query-form-item\">\n                <el-select v-model=\"query.status\" placeholder=\"状态\">\n                    <!--<el-option label=\"状态\" value=\"\"></el-option>-->\n                    <el-option label=\"禁用\" value=\"0\"></el-option>\n                    <el-option label=\"正常\" value=\"1\"></el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" icon=\"el-icon-refresh\" @click=\"getList\"></el-button>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" icon=\"search\" @click=\"onSubmit\">查询</el-button>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click.native=\"handleForm(null, null)\">新增</el-button>\n            </el-form-item>\n        </el-form>\n        <el-table\n            v-loading=\"loading\"\n            :data=\"list\"\n            style=\"width: 100%;\"\n            max-height=\"500\">\n            <el-table-column\n                label=\"角色 ID\"\n                prop=\"id\">\n            </el-table-column>\n            <el-table-column\n                label=\"角色名称\"\n                prop=\"name\">\n            </el-table-column>\n            <el-table-column\n                label=\"状态\">\n                <template slot-scope=\"scope\">\n                    <el-tag :type=\"scope.row.status | statusFilterType\">{{scope.row.status | statusFilterName}}</el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"描述\"\n                :show-overflow-tooltip=\"true\">\n                <template slot-scope=\"scope\">\n                    <span>{{ scope.row.remark }}</span>\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"操作\"\n                fixed=\"right\"\n                width=\"200\">\n                <template slot-scope=\"scope\">\n                    <el-button size=\"small\" style=\"margin-left: 0;\" @click.native=\"handleAuth(scope.row.id)\">授权</el-button>\n                    <el-button size=\"small\" style=\"margin-left: 0;\" @click.native=\"handleForm(scope.$index, scope.row)\">编辑</el-button>\n                    <el-button type=\"danger\" size=\"small\" @click.native=\"handleDel(scope.$index, scope.row)\"\n                               style=\"margin-left: 0;\"\n                               :loading=\"deleteLoading\">删除\n                    </el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n\n        <!--授权界面-->\n        <el-dialog title=\"授权\" :visible.sync=\"authFormVisible\" :close-on-click-modal=\"false\" class=\"dialog\">\n            <el-tree\n                style=\"max-height: 75vh;overflow-y: auto;\"\n                :data=\"authList\"\n                show-checkbox=\"\"\n                default-expand-all=\"\"\n                node-key=\"id\"\n                ref=\"tree\"\n                :props=\"defaultProps\">\n            </el-tree>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click.native=\"authFormVisible = !authFormVisible\">取消</el-button>\n                <el-button type=\"primary\" @click.native=\"authSubmit()\" :loading=\"authLoading\">提交\n                </el-button>\n            </div>\n        </el-dialog>\n\n        <!--表单-->\n        <el-dialog :title=\"formMap[formName]\" :visible.sync=\"formVisible\">\n            <el-form :model=\"formData\" :rules=\"formRules\" ref=\"dataForm\">\n                <el-form-item label=\"角色名称\" prop=\"name\">\n                    <el-input v-model=\"formData.name\" auto-complete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"排序\" prop=\"listorder\">\n                    <el-input type=\"\" v-model=\"formData.listorder\" auto-complete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"状态\" prop=\"status\">\n                    <el-radio-group v-model=\"formData.status\">\n                        <el-radio label=\"0\">禁用</el-radio>\n                        <el-radio label=\"1\">正常</el-radio>\n                    </el-radio-group>\n                </el-form-item>\n                <el-form-item label=\"描述\">\n                    <el-input type=\"textarea\" v-model=\"formData.remark\"></el-input>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click.native=\"formVisible = !formVisible\">取消</el-button>\n                <el-button type=\"primary\" @click.native=\"formSubmit()\" :loading=\"formLoading\">提交</el-button>\n            </div>\n        </el-dialog>\n    </div>\n\n</template>\n\n<script>\n    import { getRoleList, roleAuthList, roleAuth, roleSave, roleDelete } from '../../../api/role'\n    const formJson = {\n        id: '',\n        name: '',\n        status: '1',\n        remark: '',\n        listorder: 999\n    }\n    export default {\n        data () {\n            return {\n                query: {\n                    name: '',\n                    status: ''\n                },\n                list: [],\n                loading: true,\n                authList: [],\n                defaultProps: {\n                    children: 'children',\n                    label: 'title'\n                },\n                authLoading: false,\n                authFormVisible: false,\n                authFormData: {\n                    role_id: '',\n                    auth_rules: []\n                },\n\n                index: null,\n                formName: null,\n                formMap: {\n                    add: '新增',\n                    edit: '编辑'\n                },\n                formLoading: false,\n                formVisible: false,\n                formData: formJson,\n                formRules: {\n                    name: [\n                        {required: true, message: '请输入名称', trigger: 'blur'}\n                    ],\n                    status: [\n                        {required: true, message: '请选择状态', trigger: 'change'}\n                    ]\n                },\n                deleteLoading: false\n            }\n        },\n        methods: {\n            onSubmit () {\n                this.getList()\n            },\n            getList () {\n                this.loading = true\n                getRoleList(this.query).then(response => {\n                    this.loading = false\n                    this.list = response || []\n                }).catch(() => {\n                    this.loading = false\n                    this.list = []\n                })\n            },\n            // 显示授权界面\n            handleAuth (roleId) {\n                this.authFormVisible = true\n                this.authFormData.role_id = roleId\n                this.authFormData.auth_rules = []\n                this.authList = []\n                roleAuthList({id: roleId}).then(response => {\n                    this.authList = response.auth_list || []\n                    const checkedKeys = response.checked_keys || []\n                    var tempCheckedKeys = []\n                    var id = null\n                    var node = null\n                    var getTreeNode = function (arr, id) {\n                        for (var i in arr) {\n                            var tempNode = arr[i]\n                            if (tempNode.id === id) {\n                                // 找到了，就不找了\n                                node = tempNode\n                            }\n                            // 如果还有子节点，再继续找\n                            getTreeNode(tempNode.children, id)\n                        }\n                    }\n                    for (var i in checkedKeys) {\n                        id = checkedKeys[i]\n                        getTreeNode(this.authList, id)\n                        if (node && node.children.length <= 0) {\n                            // 如果下面没有子节点，则加入\n                            tempCheckedKeys.push(id)\n                        }\n                    }\n                    this.$refs.tree.setCheckedKeys(tempCheckedKeys)\n                }).catch(() => {\n                })\n            },\n            authSubmit () {\n                this.authLoading = true\n                var getNodeParents = function (node) {\n                    var arr = []\n                    var id = node.data.id || null\n                    if (id) {\n                        arr.push(node.data.id)\n                    }\n                    if (node.parent) {\n                        arr = arr.concat(getNodeParents(node.parent))\n                    }\n                    return arr\n                }\n                var checkedKeys = this.$refs.tree.getCheckedKeys()\n                var arr = []\n                for (var key in checkedKeys) {\n                    var node = this.$refs.tree.getNode(checkedKeys[key])\n                    arr = arr.concat(getNodeParents(node))\n                }\n                var setArr = new Set(arr)\n                this.authFormData.auth_rules = [...setArr]\n                if (!this.authFormData) {\n                    this.$alert('请至少选择一个权限', '提示', {\n                        confirmButtonText: '确定'\n                    })\n                    return false\n                }\n                roleAuth(this.authFormData).then(res => {\n                    this.authLoading = false\n                    if (res.errcode) {\n                        this.$message({\n                            message: res.errmsg,\n                            type: 'error'\n                        })\n                    } else {\n                        this.$message({\n                            message: '授权成功',\n                            type: 'success'\n                        })\n                        // 刷新表单\n                        this.authFormVisible = false\n                    }\n                }).catch(() => {\n                    this.editLoading = false\n                })\n            },\n            // 显示新增界面\n            handleForm (index, row) {\n                this.formVisible = true\n                this.formData = Object.assign({}, formJson)\n                if (row !== null) {\n                    this.formData = Object.assign({}, row)\n                }\n                this.formData.status += '' // 转为字符串（解决默认选中的时候字符串和数字不能比较的问题）\n                this.formName = 'add'\n                if (index !== null) {\n                    this.index = index\n                    this.formName = 'edit'\n                }\n                // 清空验证信息表单\n                if (this.$refs['dataForm']) {\n                    this.$refs['dataForm'].clearValidate()\n                }\n            },\n            formSubmit () {\n                this.$refs['dataForm'].validate(valid => {\n                    if (valid) {\n                        this.formLoading = true\n                        let data = Object.assign({}, this.formData)\n                        roleSave(data, this.formName).then(res => {\n                            this.formLoading = false\n                            if (res.errcode) {\n                                this.$message({\n                                    message: res.errmsg,\n                                    type: 'error'\n                                })\n                            } else {\n                                this.$message({\n                                    message: '操作成功',\n                                    type: 'success'\n                                })\n                                // 刷新表单\n                                this.$refs['dataForm'].resetFields()\n                                this.formVisible = false\n                                if (this.formName === 'add') {\n                                    // 向头部添加数据\n                                    this.list.unshift(res)\n                                } else {\n                                    this.list.splice(this.index, 1, data)\n                                }\n                            }\n                        }).catch(() => {\n                            this.formLoading = false\n                        })\n                    }\n                })\n            },\n            // 删除\n            handleDel (index, row) {\n                if (row.id) {\n                    this.$confirm('确认删除该记录吗?', '提示', {\n                        type: 'warning'\n                    }).then(() => {\n                        this.deleteLoading = true\n                        let para = {id: row.id}\n                        roleDelete(para).then((res) => {\n                            this.deleteLoading = false\n                            if (res.errcode) {\n                                this.$message({\n                                    message: res.errmsg,\n                                    type: 'error'\n                                })\n                            } else {\n                                this.$message({\n                                    message: '删除成功',\n                                    type: 'success'\n                                })\n                                // 刷新数据\n                                this.list.splice(index, 1)\n                            }\n                        }).catch(() => {\n                            this.deleteLoading = false\n                        })\n                    }).catch(() => {\n                        this.$message({\n                            type: 'info',\n                            message: '取消删除'\n                        })\n                    })\n                }\n            }\n        },\n        filters: {\n            statusFilterType (status) {\n                const statusMap = {\n                    0: 'gray',\n                    1: 'success'\n                }\n                return statusMap[status]\n            },\n            statusFilterName (status) {\n                const statusMap = {\n                    0: '禁用',\n                    1: '正常'\n                }\n                return statusMap[status]\n            }\n        },\n        mounted () {\n        },\n        created () {\n            // 加载表格数据\n            this.getList()\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user_manage/admin/role.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{staticClass:\"query-form\",attrs:{\"inline\":true,\"model\":_vm.query,\"size\":\"mini\"}},[_c('el-form-item',{staticClass:\"query-form-item\"},[_c('el-input',{attrs:{\"placeholder\":\"角色名称\"},model:{value:(_vm.query.name),callback:function ($$v) {_vm.$set(_vm.query, \"name\", $$v)},expression:\"query.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"query-form-item\"},[_c('el-select',{attrs:{\"placeholder\":\"状态\"},model:{value:(_vm.query.status),callback:function ($$v) {_vm.$set(_vm.query, \"status\", $$v)},expression:\"query.status\"}},[_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"正常\",\"value\":\"1\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.getList}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.handleForm(null, null)}}},[_vm._v(\"新增\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"max-height\":\"500\"}},[_c('el-table-column',{attrs:{\"label\":\"角色 ID\",\"prop\":\"id\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm._f(\"statusFilterType\")(scope.row.status)}},[_vm._v(_vm._s(_vm._f(\"statusFilterName\")(scope.row.status)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"描述\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.remark))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.handleAuth(scope.row.id)}}},[_vm._v(\"授权\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.handleForm(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"type\":\"danger\",\"size\":\"small\",\"loading\":_vm.deleteLoading},nativeOn:{\"click\":function($event){_vm.handleDel(scope.$index, scope.row)}}},[_vm._v(\"删除\\n                \")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":\"授权\",\"visible\":_vm.authFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.authFormVisible=$event}}},[_c('el-tree',{ref:\"tree\",staticStyle:{\"max-height\":\"75vh\",\"overflow-y\":\"auto\"},attrs:{\"data\":_vm.authList,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"props\":_vm.defaultProps}}),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.authFormVisible = !_vm.authFormVisible}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.authLoading},nativeOn:{\"click\":function($event){_vm.authSubmit()}}},[_vm._v(\"提交\\n            \")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.formMap[_vm.formName],\"visible\":_vm.formVisible},on:{\"update:visible\":function($event){_vm.formVisible=$event}}},[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.formData,\"rules\":_vm.formRules}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.formData.name),callback:function ($$v) {_vm.$set(_vm.formData, \"name\", $$v)},expression:\"formData.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"listorder\"}},[_c('el-input',{attrs:{\"type\":\"\",\"auto-complete\":\"off\"},model:{value:(_vm.formData.listorder),callback:function ($$v) {_vm.$set(_vm.formData, \"listorder\", $$v)},expression:\"formData.listorder\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"status\"}},[_c('el-radio-group',{model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},[_c('el-radio',{attrs:{\"label\":\"0\"}},[_vm._v(\"禁用\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"正常\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.formData.remark),callback:function ($$v) {_vm.$set(_vm.formData, \"remark\", $$v)},expression:\"formData.remark\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.formVisible = !_vm.formVisible}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.formLoading},nativeOn:{\"click\":function($event){_vm.formSubmit()}}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-1457f30f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/user_manage/admin/role.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1457f30f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./role.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js\")(\"21f842cc\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.1.2@vue-style-loader!./node_modules/_css-loader@0.28.11@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1457f30f\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/user_manage/admin/role.vue\n// module id = e1/n\n// module chunks = 8"],"sourceRoot":""}