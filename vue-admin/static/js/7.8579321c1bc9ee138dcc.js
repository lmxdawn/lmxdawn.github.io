webpackJsonp([7],{eqSo:function(e,t,a){var s=a("hiDC");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("8bSs")("66ba8b4e",s,!0)},hiDC:function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},tkAz:function(e,t,a){"use strict";function s(e){return Object(n.a)({url:"/admin/admin/index",method:"get",params:e})}function r(e){return Object(n.a)({url:"/admin/admin/save",method:"post",data:e})}function i(e){return Object(n.a)({url:"/admin/admin/edit",method:"post",data:e})}function o(e){return Object(n.a)({url:"/admin/admin/delete",method:"post",data:e})}function l(e){a("eqSo")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("Vo7i"),d={data:function(){var e=this;return{roles:[],query:{username:"",status:"",page:1,limit:20,role_id:""},list:[],total:0,loading:!0,addLoading:!1,addFormVisible:!1,addFormData:{username:"",password:"",checkPassword:"",status:1,roles:[]},addFormDataRules:{username:[{required:!0,message:"请输入姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(t,a,s){""===a?s(new Error("请输入密码")):(""!==e.addFormData.checkPassword&&e.$refs.addFormData.validateField("checkPassword"),s())},trigger:"blur"}],checkPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,a,s){""===a?s(new Error("请再次输入密码")):a!==e.addFormData.password?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},editLoading:!1,editFormVisible:!1,editFormData:{id:"",username:"",password:"",status:0,roles:[]},editIndex:"",editFormRules:{username:[{required:!0,message:"请输入姓名",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}}},methods:{onSubmit:function(){this.getList()},handleSizeChange:function(e){this.query.limit=e,this.getList()},handleCurrentChange:function(e){this.query.page=e,this.getList()},getList:function(){var e=this;this.loading=!0,s(this.query).then(function(t){e.loading=!1,e.list=t.admin_list.data||[],e.total=t.admin_list.total||0,e.roles=t.role_list||[]}).catch(function(){e.loading=!1,e.list=[],e.total=0,e.roles=[]})},handleDel:function(e,t){var a=this;t.id&&this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.loading=!0,o({id:t.id}).then(function(t){t.errcode?a.$message({message:t.errmsg,type:"error"}):(a.$message({message:"删除成功",type:"success"}),a.list.splice(e,1))}).catch(function(){a.deleteLoading=!1})}).catch(function(){a.$message({type:"info",message:"取消删除"})})},handleEdit:function(e,t){this.editFormVisible=!0,this.editFormData=Object.assign({},t),this.editFormData.status+="",this.editIndex=e},editSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.editLoading=!0;var a=Object.assign({},t.editFormData);i(a).then(function(e){t.editLoading=!1,e.errcode?t.$message({message:e.errmsg,type:"error"}):(t.$message({message:"编辑成功",type:"success"}),t.$refs.editFormData.resetFields(),t.editFormVisible=!1,t.list.splice(t.editIndex,1,a))})}})},handleAdd:function(){this.addFormVisible=!0,this.addFormData={username:"",password:"",checkPassword:"",status:"",roles:[]}},addSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.addLoading=!0;r(Object.assign({},t.addFormData)).then(function(e){t.addLoading=!1,e.errcode?t.$message({message:e.errmsg,type:"error"}):(t.$message({message:"添加成功",type:"success"}),t.$refs.addFormData.resetFields(),t.addFormVisible=!1,t.getList())})}})}},filters:{statusFilterType:function(e){return{0:"gray",1:"success",2:"danger"}[e]},statusFilterName:function(e){return{0:"禁用",1:"正常",2:"未验证"}[e]}},mounted:function(){},created:function(){this.getList()}},u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"query-form",attrs:{inline:!0,model:e.query,size:"mini"}},[a("el-form-item",{staticClass:"query-form-item"},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}})],1),e._v(" "),a("el-form-item",{staticClass:"query-form-item"},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},[a("el-option",{attrs:{label:"禁用",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未验证",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"query-form-item"},[a("el-select",{attrs:{placeholder:"角色"},model:{value:e.query.role_id,callback:function(t){e.$set(e.query,"role_id",t)},expression:"query.role_id"}},[a("el-option",{attrs:{label:"全部角色",value:""}}),e._v(" "),e._l(e.roles,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.getList}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.onSubmit}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.handleAdd(t)}}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"max-height":"500"}},[a("el-table-column",{attrs:{label:"用户 ID",prop:"id",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"username",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilterType")(t.row.status)}},[e._v(e._s(e._f("statusFilterName")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"登录时间",with:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("parseTime")(t.row.last_login_time,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"登录IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.last_login_ip))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"danger",size:"small"},nativeOn:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除\n                ")])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":e.query.limit,"current-page":e.query.page,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.query,"page",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editFormData",attrs:{model:e.editFormData,rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editFormData.username,callback:function(t){e.$set(e.editFormData,"username",t)},expression:"editFormData.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.editFormData.password,callback:function(t){e.$set(e.editFormData,"password",t)},expression:"editFormData.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:e.editFormData.status,callback:function(t){e.$set(e.editFormData,"status",t)},expression:"editFormData.status"}},[a("el-radio",{attrs:{label:"0"}},[e._v("禁用")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("未验证")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"角色"}},[a("el-checkbox-group",{model:{value:e.editFormData.roles,callback:function(t){e.$set(e.editFormData,"roles",t)},expression:"editFormData.roles"}},e._l(e.roles,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!e.editFormVisible}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){e.editSubmit("editFormData")}}},[e._v("提交\n            ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addFormData",attrs:{model:e.addFormData,rules:e.addFormDataRules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addFormData.username,callback:function(t){e.$set(e.addFormData,"username",t)},expression:"addFormData.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.addFormData.password,callback:function(t){e.$set(e.addFormData,"password",t)},expression:"addFormData.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.addFormData.checkPassword,callback:function(t){e.$set(e.addFormData,"checkPassword",t)},expression:"addFormData.checkPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:e.addFormData.status,callback:function(t){e.$set(e.addFormData,"status",t)},expression:"addFormData.status"}},[a("el-radio",{attrs:{label:"0"}},[e._v("禁用")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("未验证")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"角色"}},[a("el-checkbox-group",{model:{value:e.addFormData.roles,callback:function(t){e.$set(e.addFormData,"roles",t)},expression:"addFormData.roles"}},e._l(e.roles,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!e.addFormVisible}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){e.addSubmit("addFormData")}}},[e._v("提交")])],1)],1)],1)},m=[],c={render:u,staticRenderFns:m},f=c,p=a("/Xao"),g=l,v=p(d,f,!1,g,null,null);t.default=v.exports}});
//# sourceMappingURL=7.8579321c1bc9ee138dcc.js.map