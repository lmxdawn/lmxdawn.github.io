webpackJsonp([3],{fXxg:function(e,t,a){t=e.exports=a("UTlt")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},synj:function(e,t,a){var r=a("fXxg");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("FIqI")("7f793898",r,!0,{})},tkAz:function(e,t,a){"use strict";function r(e){return Object(l.a)({url:"/admin/admin/index"+n,method:"get",params:e})}function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post",r="add"===t?"/admin/admin/save"+n:"/admin/admin/edit"+n;return Object(l.a)({url:r,method:a,data:e})}function i(e){return Object(l.a)({url:"/admin/admin/delete"+n,method:"post",data:e})}function o(e){a("synj")}Object.defineProperty(t,"__esModule",{value:!0});var l=a("Vo7i"),n=".json",u={id:"",username:"",password:"",checkPassword:"",status:"1",roles:[]},m={data:function(){var e=this;return{roles:[],query:{username:"",status:"",page:1,limit:20,role_id:""},list:[],total:0,loading:!0,index:null,formName:null,formMap:{add:"新增",edit:"编辑"},formLoading:!1,formVisible:!1,formData:u,formRules:{},addRules:{username:[{required:!0,message:"请输入姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(e,t,a){""===t?a(new Error("请输入密码")):a()},trigger:"blur"}],checkPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.formData.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},editRules:{username:[{required:!0,message:"请输入姓名",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},deleteLoading:!1}},methods:{onSubmit:function(){this.$router.push({path:"",query:this.query}),this.getList()},handleSizeChange:function(e){this.query.limit=e,this.getList()},handleCurrentChange:function(e){this.query.page=e,this.getList()},getList:function(){var e=this;this.loading=!0,r(this.query).then(function(t){e.loading=!1,e.list=t.admin_list.data||[],e.total=t.admin_list.total||0,e.roles=t.role_list||[]}).catch(function(){e.loading=!1,e.list=[],e.total=0,e.roles=[]})},handleForm:function(e,t){this.formVisible=!0,this.formData=Object.assign({},u),null!==t&&(this.formData=Object.assign({},t)),this.formData.status+="",this.formName="add",this.formRules=this.addRules,null!==e&&(this.index=e,this.formName="edit",this.formRules=this.editRules),this.$refs.dataForm&&this.$refs.dataForm.clearValidate()},formSubmit:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){e.formLoading=!0;var a=Object.assign({},e.formData);s(a,e.formName).then(function(t){e.formLoading=!1,t.errcode?e.$message({message:t.errmsg,type:"error"}):(e.$message({message:"操作成功",type:"success"}),e.$refs.dataForm.resetFields(),e.formVisible=!1,"add"===e.formName?e.list.unshift(t):e.list.splice(e.index,1,a))})}})},handleDel:function(e,t){var a=this;t.id&&this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.loading=!0,i({id:t.id}).then(function(t){t.errcode?a.$message({message:t.errmsg,type:"error"}):(a.$message({message:"删除成功",type:"success"}),a.list.splice(e,1))}).catch(function(){a.deleteLoading=!1})}).catch(function(){a.$message({type:"info",message:"取消删除"})})}},filters:{statusFilterType:function(e){return{0:"gray",1:"success",2:"danger"}[e]},statusFilterName:function(e){return{0:"禁用",1:"正常",2:"未验证"}[e]}},mounted:function(){},created:function(){var e=this.$route.query;this.query=Object.assign(this.query,e),this.getList()}},c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"query-form",attrs:{inline:!0,model:e.query,size:"mini"}},[a("el-form-item",{staticClass:"query-form-item"},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}})],1),e._v(" "),a("el-form-item",{staticClass:"query-form-item"},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},[a("el-option",{attrs:{label:"禁用",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未验证",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"query-form-item"},[a("el-select",{attrs:{placeholder:"角色"},model:{value:e.query.role_id,callback:function(t){e.$set(e.query,"role_id",t)},expression:"query.role_id"}},[a("el-option",{attrs:{label:"全部角色",value:""}}),e._v(" "),e._l(e.roles,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.getList}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.onSubmit}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.handleForm(null,null)}}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"max-height":"500"}},[a("el-table-column",{attrs:{label:"用户 ID",prop:"id",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",prop:"username",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilterType")(t.row.status)}},[e._v(e._s(e._f("statusFilterName")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"登录时间",with:"300","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(e._f("parseTime")(t.row.last_login_time,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"登录IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.last_login_ip))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){e.handleForm(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"danger",size:"small"},nativeOn:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除\n                ")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.formMap[e.formName],visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.formData,rules:e.formRules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.formData.checkPassword,callback:function(t){e.$set(e.formData,"checkPassword",t)},expression:"formData.checkPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[a("el-radio",{attrs:{label:"0"}},[e._v("禁用")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("未验证")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"角色"}},[a("el-checkbox-group",{model:{value:e.formData.roles,callback:function(t){e.$set(e.formData,"roles",t)},expression:"formData.roles"}},e._l(e.roles,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.formVisible=!e.formVisible}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.formLoading},nativeOn:{click:function(t){e.formSubmit()}}},[e._v("提交")])],1)],1)],1)},d=[],f={render:c,staticRenderFns:d},p=f,g=a("Z0/y"),v=o,h=g(m,p,!1,v,null,null);t.default=h.exports}});
//# sourceMappingURL=3.82d4720e84645c5cc4e9.js.map