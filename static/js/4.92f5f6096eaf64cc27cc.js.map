{"version":3,"sources":["webpack:///static/js/4.92f5f6096eaf64cc27cc.js","webpack:///./src/pages/user_manage/admin/role.vue?da61","webpack:///./src/api/role.js","webpack:///./src/pages/user_manage/admin/role.vue","webpack:///src/pages/user_manage/admin/role.vue","webpack:///./src/pages/user_manage/admin/role.vue?aa0f","webpack:///./src/pages/user_manage/admin/role.vue?639b"],"names":["webpackJsonp","80ce","module","exports","__webpack_require__","content","i","locals","WQQx","__webpack_exports__","getRoleList","query","Object","fetch","url","API_SUFFIX","method","params","roleAuthList","roleAuth","data","roleSave","formName","arguments","length","undefined","roleDelete","_toConsumableArray","arr","Array","isArray","arr2","from","injectStyle","ssrContext","defineProperty","value","formJson","id","name","status","remark","listorder","role","list","loading","authList","defaultProps","children","label","authLoading","authFormVisible","authFormData","role_id","auth_rules","index","formMap","add","edit","formLoading","formVisible","formData","formRules","required","message","trigger","deleteLoading","methods","onSubmit","this","getList","_this","then","response","catch","handleAuth","roleId","_this2","auth_list","checkedKeys","checked_keys","tempCheckedKeys","node","getTreeNode","tempNode","push","$refs","tree","setCheckedKeys","authSubmit","_this3","getCheckedKeys","key","getNode","concat","getNodeParents","parent","setArr","Set","$alert","confirmButtonText","res","errcode","$message","errmsg","type","editLoading","handleForm","row","assign","clearValidate","formSubmit","_this4","validate","valid","resetFields","unshift","splice","handleDel","_this5","$confirm","filters","statusFilterType","0","1","statusFilterName","mounted","created","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","inline","model","size","placeholder","callback","$$v","$set","expression","_v","icon","on","click","nativeOn","$event","directives","rawName","staticStyle","width","max-height","prop","scopedSlots","_u","fn","scope","_f","_s","show-overflow-tooltip","fixed","margin-left","$index","title","visible","close-on-click-modal","update:visible","ref","overflow-y","show-checkbox","default-expand-all","node-key","props","slot","top","rules","auto-complete","staticRenderFns","esExports","admin_role","normalizeComponent","__vue_styles__","Component","p79t","version","sources","names","mappings","file","sourceRoot"],"mappings":"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","file":"static/js/4.92f5f6096eaf64cc27cc.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ \"80ce\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"p79t\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"FIqI\")(\"6aba7c1e\", content, true, {});\n\n/***/ }),\n\n/***/ \"WQQx\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/utils/fetch.js + 1 modules\nvar fetch = __webpack_require__(\"Vo7i\");\n\n// CONCATENATED MODULE: ./src/api/role.js\n/**\n * Created by lk on 17/6/4.\n */\n\n\nvar API_SUFFIX = \".json\";\n\n// 获取列表\nfunction getRoleList(query) {\n    return Object(fetch[\"a\" /* default */])({\n        url: '/admin/role/index' + API_SUFFIX,\n        method: 'get',\n        params: query\n    });\n}\n\n// 编辑\nfunction roleAuthList(query) {\n    return Object(fetch[\"a\" /* default */])({\n        url: '/admin/role/auth' + API_SUFFIX,\n        method: 'get',\n        params: query\n    });\n}\n\n// 添加\nfunction roleAuth(data) {\n    return Object(fetch[\"a\" /* default */])({\n        url: '/admin/role/auth' + API_SUFFIX,\n        method: 'post',\n        data: data\n    });\n}\n\n// 保存\nfunction roleSave(data, formName) {\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'post';\n\n    var url = formName === 'add' ? '/admin/role/save' + API_SUFFIX : '/admin/role/edit' + API_SUFFIX;\n    return Object(fetch[\"a\" /* default */])({\n        url: url,\n        method: method,\n        data: data\n    });\n}\n\n// 删除\nfunction roleDelete(data) {\n    return Object(fetch[\"a\" /* default */])({\n        url: '/admin/role/delete' + API_SUFFIX,\n        method: 'post',\n        data: data\n    });\n}\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=script&index=0!./src/pages/user_manage/admin/role.vue\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nvar formJson = {\n    id: '',\n    name: '',\n    status: '1',\n    remark: '',\n    listorder: 999\n};\n/* harmony default export */ var role = ({\n    data: function data() {\n        return {\n            query: {\n                name: '',\n                status: ''\n            },\n            list: [],\n            loading: true,\n            authList: [],\n            defaultProps: {\n                children: 'children',\n                label: 'title'\n            },\n            authLoading: false,\n            authFormVisible: false,\n            authFormData: {\n                role_id: '',\n                auth_rules: []\n            },\n\n            index: null,\n            formName: null,\n            formMap: {\n                add: '新增',\n                edit: '编辑'\n            },\n            formLoading: false,\n            formVisible: false,\n            formData: formJson,\n            formRules: {\n                name: [{ required: true, message: '请输入名称', trigger: 'blur' }],\n                status: [{ required: true, message: '请选择状态', trigger: 'change' }]\n            },\n            deleteLoading: false\n        };\n    },\n\n    methods: {\n        onSubmit: function onSubmit() {\n            this.getList();\n        },\n        getList: function getList() {\n            var _this = this;\n\n            this.loading = true;\n            getRoleList(this.query).then(function (response) {\n                _this.loading = false;\n                _this.list = response || [];\n            }).catch(function () {\n                _this.loading = false;\n                _this.list = [];\n            });\n        },\n\n        // 显示授权界面\n        handleAuth: function handleAuth(roleId) {\n            var _this2 = this;\n\n            this.authFormVisible = true;\n            this.authFormData.role_id = roleId;\n            this.authFormData.auth_rules = [];\n            this.authList = [];\n            roleAuthList({ id: roleId }).then(function (response) {\n                _this2.authList = response.auth_list || [];\n                var checkedKeys = response.checked_keys || [];\n                var tempCheckedKeys = [];\n                var id = null;\n                var node = null;\n                var getTreeNode = function getTreeNode(arr, id) {\n                    for (var i in arr) {\n                        var tempNode = arr[i];\n                        if (tempNode.id === id) {\n                            // 找到了，就不找了\n                            node = tempNode;\n                        }\n                        // 如果还有子节点，再继续找\n                        getTreeNode(tempNode.children, id);\n                    }\n                };\n                for (var i in checkedKeys) {\n                    id = checkedKeys[i];\n                    getTreeNode(_this2.authList, id);\n                    if (node && node.children.length <= 0) {\n                        // 如果下面没有子节点，则加入\n                        tempCheckedKeys.push(id);\n                    }\n                }\n                _this2.$refs.tree.setCheckedKeys(tempCheckedKeys);\n            }).catch(function () {});\n        },\n        authSubmit: function authSubmit() {\n            var _this3 = this;\n\n            this.authLoading = true;\n            var getNodeParents = function getNodeParents(node) {\n                var arr = [];\n                var id = node.data.id || null;\n                if (id) {\n                    arr.push(node.data.id);\n                }\n                if (node.parent) {\n                    arr = arr.concat(getNodeParents(node.parent));\n                }\n                return arr;\n            };\n            var checkedKeys = this.$refs.tree.getCheckedKeys();\n            var arr = [];\n            for (var key in checkedKeys) {\n                var node = this.$refs.tree.getNode(checkedKeys[key]);\n                arr = arr.concat(getNodeParents(node));\n            }\n            var setArr = new Set(arr);\n            this.authFormData.auth_rules = [].concat(_toConsumableArray(setArr));\n            if (!this.authFormData) {\n                this.$alert('请至少选择一个权限', '提示', {\n                    confirmButtonText: '确定'\n                });\n                return false;\n            }\n            roleAuth(this.authFormData).then(function (res) {\n                _this3.authLoading = false;\n                if (res.errcode) {\n                    _this3.$message({\n                        message: res.errmsg,\n                        type: 'error'\n                    });\n                } else {\n                    _this3.$message({\n                        message: '授权成功',\n                        type: 'success'\n                    });\n                    // 刷新表单\n                    _this3.authFormVisible = false;\n                }\n            }).catch(function () {\n                _this3.editLoading = false;\n            });\n        },\n\n        // 显示新增界面\n        handleForm: function handleForm(index, row) {\n            this.formVisible = true;\n            this.formData = Object.assign({}, formJson);\n            if (row !== null) {\n                this.formData = Object.assign({}, row);\n            }\n            this.formData.status += ''; // 转为字符串（解决默认选中的时候字符串和数字不能比较的问题）\n            this.formName = 'add';\n            if (index !== null) {\n                this.index = index;\n                this.formName = 'edit';\n            }\n            // 清空验证信息表单\n            if (this.$refs['dataForm']) {\n                this.$refs['dataForm'].clearValidate();\n            }\n        },\n        formSubmit: function formSubmit() {\n            var _this4 = this;\n\n            this.$refs['dataForm'].validate(function (valid) {\n                if (valid) {\n                    _this4.formLoading = true;\n                    var data = Object.assign({}, _this4.formData);\n                    roleSave(data, _this4.formName).then(function (res) {\n                        _this4.formLoading = false;\n                        if (res.errcode) {\n                            _this4.$message({\n                                message: res.errmsg,\n                                type: 'error'\n                            });\n                        } else {\n                            _this4.$message({\n                                message: '操作成功',\n                                type: 'success'\n                            });\n                            // 刷新表单\n                            _this4.$refs['dataForm'].resetFields();\n                            _this4.formVisible = false;\n                            if (_this4.formName === 'add') {\n                                // 向头部添加数据\n                                _this4.list.unshift(res);\n                            } else {\n                                _this4.list.splice(_this4.index, 1, data);\n                            }\n                        }\n                    }).catch(function () {\n                        _this4.formLoading = false;\n                    });\n                }\n            });\n        },\n\n        // 删除\n        handleDel: function handleDel(index, row) {\n            var _this5 = this;\n\n            if (row.id) {\n                this.$confirm('确认删除该记录吗?', '提示', {\n                    type: 'warning'\n                }).then(function () {\n                    _this5.deleteLoading = true;\n                    var para = { id: row.id };\n                    roleDelete(para).then(function (res) {\n                        _this5.deleteLoading = false;\n                        if (res.errcode) {\n                            _this5.$message({\n                                message: res.errmsg,\n                                type: 'error'\n                            });\n                        } else {\n                            _this5.$message({\n                                message: '删除成功',\n                                type: 'success'\n                            });\n                            // 刷新数据\n                            _this5.list.splice(index, 1);\n                        }\n                    }).catch(function () {\n                        _this5.deleteLoading = false;\n                    });\n                }).catch(function () {\n                    _this5.$message({\n                        type: 'info',\n                        message: '取消删除'\n                    });\n                });\n            }\n        }\n    },\n    filters: {\n        statusFilterType: function statusFilterType(status) {\n            var statusMap = {\n                0: 'gray',\n                1: 'success'\n            };\n            return statusMap[status];\n        },\n        statusFilterName: function statusFilterName(status) {\n            var statusMap = {\n                0: '禁用',\n                1: '正常'\n            };\n            return statusMap[status];\n        }\n    },\n    mounted: function mounted() {},\n    created: function created() {\n        // 加载表格数据\n        this.getList();\n    }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-706c9c96\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/user_manage/admin/role.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{staticClass:\"query-form\",attrs:{\"inline\":true,\"model\":_vm.query,\"size\":\"mini\"}},[_c('el-form-item',{staticClass:\"query-form-item\"},[_c('el-input',{attrs:{\"placeholder\":\"角色名称\"},model:{value:(_vm.query.name),callback:function ($$v) {_vm.$set(_vm.query, \"name\", $$v)},expression:\"query.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"query-form-item\"},[_c('el-select',{attrs:{\"placeholder\":\"状态\"},model:{value:(_vm.query.status),callback:function ($$v) {_vm.$set(_vm.query, \"status\", $$v)},expression:\"query.status\"}},[_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"正常\",\"value\":\"1\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.getList}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.handleForm(null, null)}}},[_vm._v(\"新增\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"max-height\":\"500\"}},[_c('el-table-column',{attrs:{\"label\":\"角色 ID\",\"prop\":\"id\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm._f(\"statusFilterType\")(scope.row.status)}},[_vm._v(_vm._s(_vm._f(\"statusFilterName\")(scope.row.status)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"描述\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.remark))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.handleAuth(scope.row.id)}}},[_vm._v(\"授权\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.handleForm(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"type\":\"danger\",\"size\":\"small\",\"loading\":_vm.deleteLoading},nativeOn:{\"click\":function($event){_vm.handleDel(scope.$index, scope.row)}}},[_vm._v(\"删除\\n                \")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":\"授权\",\"visible\":_vm.authFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.authFormVisible=$event}}},[_c('el-tree',{ref:\"tree\",staticStyle:{\"max-height\":\"75vh\",\"overflow-y\":\"auto\"},attrs:{\"data\":_vm.authList,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"props\":_vm.defaultProps}}),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.authFormVisible = !_vm.authFormVisible}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.authLoading},nativeOn:{\"click\":function($event){_vm.authSubmit()}}},[_vm._v(\"提交\\n            \")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.formMap[_vm.formName],\"visible\":_vm.formVisible,\"width\":\"85%\",\"top\":\"5vh\"},on:{\"update:visible\":function($event){_vm.formVisible=$event}}},[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.formData,\"rules\":_vm.formRules}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.formData.name),callback:function ($$v) {_vm.$set(_vm.formData, \"name\", $$v)},expression:\"formData.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"listorder\"}},[_c('el-input',{attrs:{\"type\":\"\",\"auto-complete\":\"off\"},model:{value:(_vm.formData.listorder),callback:function ($$v) {_vm.$set(_vm.formData, \"listorder\", $$v)},expression:\"formData.listorder\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"status\"}},[_c('el-radio-group',{model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},[_c('el-radio',{attrs:{\"label\":\"0\"}},[_vm._v(\"禁用\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"正常\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.formData.remark),callback:function ($$v) {_vm.$set(_vm.formData, \"remark\", $$v)},expression:\"formData.remark\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.formVisible = !_vm.formVisible}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.formLoading},nativeOn:{\"click\":function($event){_vm.formSubmit()}}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var admin_role = (esExports);\n// CONCATENATED MODULE: ./src/pages/user_manage/admin/role.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"80ce\")\n}\nvar normalizeComponent = __webpack_require__(\"Z0/y\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  role,\n  admin_role,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var user_manage_admin_role = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"p79t\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"UTlt\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"role.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/4.92f5f6096eaf64cc27cc.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-706c9c96\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./role.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js\")(\"6aba7c1e\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.1.2@vue-style-loader!./node_modules/_css-loader@0.28.11@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-706c9c96\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/user_manage/admin/role.vue\n// module id = 80ce\n// module chunks = 4","/**\n * Created by lk on 17/6/4.\n */\nimport fetch from '../utils/fetch'\n\nconst API_SUFFIX = process.env.API_SUFFIX\n\n// 获取列表\nexport function getRoleList (query) {\n    return fetch({\n        url: '/admin/role/index' + API_SUFFIX,\n        method: 'get',\n        params: query\n    })\n}\n\n// 编辑\nexport function roleAuthList (query) {\n    return fetch({\n        url: '/admin/role/auth' + API_SUFFIX,\n        method: 'get',\n        params: query\n    })\n}\n\n// 添加\nexport function roleAuth (data) {\n    return fetch({\n        url: '/admin/role/auth' + API_SUFFIX,\n        method: 'post',\n        data: data\n    })\n}\n\n// 保存\nexport function roleSave (data, formName, method = 'post') {\n    var url = formName === 'add' ? '/admin/role/save' + API_SUFFIX : '/admin/role/edit' + API_SUFFIX\n    return fetch({\n        url: url,\n        method: method,\n        data: data\n    })\n}\n\n// 删除\nexport function roleDelete (data) {\n    return fetch({\n        url: '/admin/role/delete' + API_SUFFIX,\n        method: 'post',\n        data: data\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/role.js","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-706c9c96\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./role.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./role.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-706c9c96\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./role.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user_manage/admin/role.vue\n// module id = null\n// module chunks = ","<template>\n\n    <div>\n        <el-form :inline=\"true\" :model=\"query\" class=\"query-form\" size=\"mini\">\n            <el-form-item class=\"query-form-item\">\n                <el-input v-model=\"query.name\" placeholder=\"角色名称\"></el-input>\n            </el-form-item>\n            <el-form-item class=\"query-form-item\">\n                <el-select v-model=\"query.status\" placeholder=\"状态\">\n                    <!--<el-option label=\"状态\" value=\"\"></el-option>-->\n                    <el-option label=\"禁用\" value=\"0\"></el-option>\n                    <el-option label=\"正常\" value=\"1\"></el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" icon=\"el-icon-refresh\" @click=\"getList\"></el-button>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" icon=\"search\" @click=\"onSubmit\">查询</el-button>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click.native=\"handleForm(null, null)\">新增</el-button>\n            </el-form-item>\n        </el-form>\n        <el-table\n            v-loading=\"loading\"\n            :data=\"list\"\n            style=\"width: 100%;\"\n            max-height=\"500\">\n            <el-table-column\n                label=\"角色 ID\"\n                prop=\"id\">\n            </el-table-column>\n            <el-table-column\n                label=\"角色名称\"\n                prop=\"name\">\n            </el-table-column>\n            <el-table-column\n                label=\"状态\">\n                <template slot-scope=\"scope\">\n                    <el-tag :type=\"scope.row.status | statusFilterType\">{{scope.row.status | statusFilterName}}</el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"描述\"\n                :show-overflow-tooltip=\"true\">\n                <template slot-scope=\"scope\">\n                    <span>{{ scope.row.remark }}</span>\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"操作\"\n                fixed=\"right\"\n                width=\"200\">\n                <template slot-scope=\"scope\">\n                    <el-button size=\"small\" style=\"margin-left: 0;\" @click.native=\"handleAuth(scope.row.id)\">授权</el-button>\n                    <el-button size=\"small\" style=\"margin-left: 0;\" @click.native=\"handleForm(scope.$index, scope.row)\">编辑</el-button>\n                    <el-button type=\"danger\" size=\"small\" @click.native=\"handleDel(scope.$index, scope.row)\"\n                               style=\"margin-left: 0;\"\n                               :loading=\"deleteLoading\">删除\n                    </el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n\n        <!--授权界面-->\n        <el-dialog title=\"授权\" :visible.sync=\"authFormVisible\" :close-on-click-modal=\"false\" class=\"dialog\">\n            <el-tree\n                style=\"max-height: 75vh;overflow-y: auto;\"\n                :data=\"authList\"\n                show-checkbox=\"\"\n                default-expand-all=\"\"\n                node-key=\"id\"\n                ref=\"tree\"\n                :props=\"defaultProps\">\n            </el-tree>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click.native=\"authFormVisible = !authFormVisible\">取消</el-button>\n                <el-button type=\"primary\" @click.native=\"authSubmit()\" :loading=\"authLoading\">提交\n                </el-button>\n            </div>\n        </el-dialog>\n\n        <!--表单-->\n        <el-dialog :title=\"formMap[formName]\" :visible.sync=\"formVisible\" width=\"85%\" top=\"5vh\">\n            <el-form :model=\"formData\" :rules=\"formRules\" ref=\"dataForm\">\n                <el-form-item label=\"角色名称\" prop=\"name\">\n                    <el-input v-model=\"formData.name\" auto-complete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"排序\" prop=\"listorder\">\n                    <el-input type=\"\" v-model=\"formData.listorder\" auto-complete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"状态\" prop=\"status\">\n                    <el-radio-group v-model=\"formData.status\">\n                        <el-radio label=\"0\">禁用</el-radio>\n                        <el-radio label=\"1\">正常</el-radio>\n                    </el-radio-group>\n                </el-form-item>\n                <el-form-item label=\"描述\">\n                    <el-input type=\"textarea\" v-model=\"formData.remark\"></el-input>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click.native=\"formVisible = !formVisible\">取消</el-button>\n                <el-button type=\"primary\" @click.native=\"formSubmit()\" :loading=\"formLoading\">提交</el-button>\n            </div>\n        </el-dialog>\n    </div>\n\n</template>\n\n<script>\n    import { getRoleList, roleAuthList, roleAuth, roleSave, roleDelete } from '../../../api/role'\n    const formJson = {\n        id: '',\n        name: '',\n        status: '1',\n        remark: '',\n        listorder: 999\n    }\n    export default {\n        data () {\n            return {\n                query: {\n                    name: '',\n                    status: ''\n                },\n                list: [],\n                loading: true,\n                authList: [],\n                defaultProps: {\n                    children: 'children',\n                    label: 'title'\n                },\n                authLoading: false,\n                authFormVisible: false,\n                authFormData: {\n                    role_id: '',\n                    auth_rules: []\n                },\n\n                index: null,\n                formName: null,\n                formMap: {\n                    add: '新增',\n                    edit: '编辑'\n                },\n                formLoading: false,\n                formVisible: false,\n                formData: formJson,\n                formRules: {\n                    name: [\n                        {required: true, message: '请输入名称', trigger: 'blur'}\n                    ],\n                    status: [\n                        {required: true, message: '请选择状态', trigger: 'change'}\n                    ]\n                },\n                deleteLoading: false\n            }\n        },\n        methods: {\n            onSubmit () {\n                this.getList()\n            },\n            getList () {\n                this.loading = true\n                getRoleList(this.query).then(response => {\n                    this.loading = false\n                    this.list = response || []\n                }).catch(() => {\n                    this.loading = false\n                    this.list = []\n                })\n            },\n            // 显示授权界面\n            handleAuth (roleId) {\n                this.authFormVisible = true\n                this.authFormData.role_id = roleId\n                this.authFormData.auth_rules = []\n                this.authList = []\n                roleAuthList({id: roleId}).then(response => {\n                    this.authList = response.auth_list || []\n                    const checkedKeys = response.checked_keys || []\n                    var tempCheckedKeys = []\n                    var id = null\n                    var node = null\n                    var getTreeNode = function (arr, id) {\n                        for (var i in arr) {\n                            var tempNode = arr[i]\n                            if (tempNode.id === id) {\n                                // 找到了，就不找了\n                                node = tempNode\n                            }\n                            // 如果还有子节点，再继续找\n                            getTreeNode(tempNode.children, id)\n                        }\n                    }\n                    for (var i in checkedKeys) {\n                        id = checkedKeys[i]\n                        getTreeNode(this.authList, id)\n                        if (node && node.children.length <= 0) {\n                            // 如果下面没有子节点，则加入\n                            tempCheckedKeys.push(id)\n                        }\n                    }\n                    this.$refs.tree.setCheckedKeys(tempCheckedKeys)\n                }).catch(() => {\n                })\n            },\n            authSubmit () {\n                this.authLoading = true\n                var getNodeParents = function (node) {\n                    var arr = []\n                    var id = node.data.id || null\n                    if (id) {\n                        arr.push(node.data.id)\n                    }\n                    if (node.parent) {\n                        arr = arr.concat(getNodeParents(node.parent))\n                    }\n                    return arr\n                }\n                var checkedKeys = this.$refs.tree.getCheckedKeys()\n                var arr = []\n                for (var key in checkedKeys) {\n                    var node = this.$refs.tree.getNode(checkedKeys[key])\n                    arr = arr.concat(getNodeParents(node))\n                }\n                var setArr = new Set(arr)\n                this.authFormData.auth_rules = [...setArr]\n                if (!this.authFormData) {\n                    this.$alert('请至少选择一个权限', '提示', {\n                        confirmButtonText: '确定'\n                    })\n                    return false\n                }\n                roleAuth(this.authFormData).then(res => {\n                    this.authLoading = false\n                    if (res.errcode) {\n                        this.$message({\n                            message: res.errmsg,\n                            type: 'error'\n                        })\n                    } else {\n                        this.$message({\n                            message: '授权成功',\n                            type: 'success'\n                        })\n                        // 刷新表单\n                        this.authFormVisible = false\n                    }\n                }).catch(() => {\n                    this.editLoading = false\n                })\n            },\n            // 显示新增界面\n            handleForm (index, row) {\n                this.formVisible = true\n                this.formData = Object.assign({}, formJson)\n                if (row !== null) {\n                    this.formData = Object.assign({}, row)\n                }\n                this.formData.status += '' // 转为字符串（解决默认选中的时候字符串和数字不能比较的问题）\n                this.formName = 'add'\n                if (index !== null) {\n                    this.index = index\n                    this.formName = 'edit'\n                }\n                // 清空验证信息表单\n                if (this.$refs['dataForm']) {\n                    this.$refs['dataForm'].clearValidate()\n                }\n            },\n            formSubmit () {\n                this.$refs['dataForm'].validate(valid => {\n                    if (valid) {\n                        this.formLoading = true\n                        let data = Object.assign({}, this.formData)\n                        roleSave(data, this.formName).then(res => {\n                            this.formLoading = false\n                            if (res.errcode) {\n                                this.$message({\n                                    message: res.errmsg,\n                                    type: 'error'\n                                })\n                            } else {\n                                this.$message({\n                                    message: '操作成功',\n                                    type: 'success'\n                                })\n                                // 刷新表单\n                                this.$refs['dataForm'].resetFields()\n                                this.formVisible = false\n                                if (this.formName === 'add') {\n                                    // 向头部添加数据\n                                    this.list.unshift(res)\n                                } else {\n                                    this.list.splice(this.index, 1, data)\n                                }\n                            }\n                        }).catch(() => {\n                            this.formLoading = false\n                        })\n                    }\n                })\n            },\n            // 删除\n            handleDel (index, row) {\n                if (row.id) {\n                    this.$confirm('确认删除该记录吗?', '提示', {\n                        type: 'warning'\n                    }).then(() => {\n                        this.deleteLoading = true\n                        let para = {id: row.id}\n                        roleDelete(para).then((res) => {\n                            this.deleteLoading = false\n                            if (res.errcode) {\n                                this.$message({\n                                    message: res.errmsg,\n                                    type: 'error'\n                                })\n                            } else {\n                                this.$message({\n                                    message: '删除成功',\n                                    type: 'success'\n                                })\n                                // 刷新数据\n                                this.list.splice(index, 1)\n                            }\n                        }).catch(() => {\n                            this.deleteLoading = false\n                        })\n                    }).catch(() => {\n                        this.$message({\n                            type: 'info',\n                            message: '取消删除'\n                        })\n                    })\n                }\n            }\n        },\n        filters: {\n            statusFilterType (status) {\n                const statusMap = {\n                    0: 'gray',\n                    1: 'success'\n                }\n                return statusMap[status]\n            },\n            statusFilterName (status) {\n                const statusMap = {\n                    0: '禁用',\n                    1: '正常'\n                }\n                return statusMap[status]\n            }\n        },\n        mounted () {\n        },\n        created () {\n            // 加载表格数据\n            this.getList()\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user_manage/admin/role.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{staticClass:\"query-form\",attrs:{\"inline\":true,\"model\":_vm.query,\"size\":\"mini\"}},[_c('el-form-item',{staticClass:\"query-form-item\"},[_c('el-input',{attrs:{\"placeholder\":\"角色名称\"},model:{value:(_vm.query.name),callback:function ($$v) {_vm.$set(_vm.query, \"name\", $$v)},expression:\"query.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"query-form-item\"},[_c('el-select',{attrs:{\"placeholder\":\"状态\"},model:{value:(_vm.query.status),callback:function ($$v) {_vm.$set(_vm.query, \"status\", $$v)},expression:\"query.status\"}},[_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"正常\",\"value\":\"1\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.getList}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.handleForm(null, null)}}},[_vm._v(\"新增\")])],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"max-height\":\"500\"}},[_c('el-table-column',{attrs:{\"label\":\"角色 ID\",\"prop\":\"id\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":_vm._f(\"statusFilterType\")(scope.row.status)}},[_vm._v(_vm._s(_vm._f(\"statusFilterName\")(scope.row.status)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"描述\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.remark))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.handleAuth(scope.row.id)}}},[_vm._v(\"授权\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},nativeOn:{\"click\":function($event){_vm.handleForm(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"type\":\"danger\",\"size\":\"small\",\"loading\":_vm.deleteLoading},nativeOn:{\"click\":function($event){_vm.handleDel(scope.$index, scope.row)}}},[_vm._v(\"删除\\n                \")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":\"授权\",\"visible\":_vm.authFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.authFormVisible=$event}}},[_c('el-tree',{ref:\"tree\",staticStyle:{\"max-height\":\"75vh\",\"overflow-y\":\"auto\"},attrs:{\"data\":_vm.authList,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"props\":_vm.defaultProps}}),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.authFormVisible = !_vm.authFormVisible}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.authLoading},nativeOn:{\"click\":function($event){_vm.authSubmit()}}},[_vm._v(\"提交\\n            \")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.formMap[_vm.formName],\"visible\":_vm.formVisible,\"width\":\"85%\",\"top\":\"5vh\"},on:{\"update:visible\":function($event){_vm.formVisible=$event}}},[_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.formData,\"rules\":_vm.formRules}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.formData.name),callback:function ($$v) {_vm.$set(_vm.formData, \"name\", $$v)},expression:\"formData.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"listorder\"}},[_c('el-input',{attrs:{\"type\":\"\",\"auto-complete\":\"off\"},model:{value:(_vm.formData.listorder),callback:function ($$v) {_vm.$set(_vm.formData, \"listorder\", $$v)},expression:\"formData.listorder\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"status\"}},[_c('el-radio-group',{model:{value:(_vm.formData.status),callback:function ($$v) {_vm.$set(_vm.formData, \"status\", $$v)},expression:\"formData.status\"}},[_c('el-radio',{attrs:{\"label\":\"0\"}},[_vm._v(\"禁用\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"正常\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.formData.remark),callback:function ($$v) {_vm.$set(_vm.formData, \"remark\", $$v)},expression:\"formData.remark\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.formVisible = !_vm.formVisible}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.formLoading},nativeOn:{\"click\":function($event){_vm.formSubmit()}}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-706c9c96\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/user_manage/admin/role.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"role.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.11@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-706c9c96\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/user_manage/admin/role.vue\n// module id = p79t\n// module chunks = 4"],"sourceRoot":""}